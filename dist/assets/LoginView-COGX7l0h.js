import{u as w,g as k,r as u,a as i,b as t,f as r,d as v,w as c,h as V,R as q,i as N,j as R,k as p,v as x,t as m,l as S,m as j,o as b}from"./index-K87GO5ZW.js";const B={class:"flex min-h-[70vh] items-center justify-center px-4"},C={class:"w-full max-w-sm space-y-6 rounded-3xl border border-slate-200 bg-white p-6 shadow-lg dark:border-slate-800 dark:bg-slate-900"},D={class:"mt-2 text-sm leading-relaxed text-slate-500 dark:text-slate-400"},L={class:"block space-y-2 text-sm"},M={class:"block space-y-2 text-sm"},T={key:0,class:"rounded-2xl bg-red-50 px-3 py-2 text-xs text-red-500 dark:bg-red-500/10 dark:text-red-200"},U=["disabled"],z={__name:"LoginView",setup(A){const f=w(),y=S(),n=j(),a=k({username:"",password:""}),l=u(!1),o=u(""),g=async()=>{if(!l.value){o.value="",l.value=!0;try{await f.login(a);const s=typeof n.query.redirect=="string"?n.query.redirect:"/";y.replace(s)}catch(s){o.value=(s==null?void 0:s.message)||"登录失败，请稍后再试"}finally{l.value=!1}}};return(s,e)=>(b(),i("div",B,[t("section",C,[t("div",null,[e[12]||(e[12]=t("h1",{class:"text-2xl font-semibold text-slate-900 dark:text-slate-100"},"账号登录",-1)),t("p",D,[e[3]||(e[3]=r(" 体验互动功能可使用演示账号：",-1)),e[4]||(e[4]=t("br",null,null,-1)),e[5]||(e[5]=r(" 作者 ",-1)),e[6]||(e[6]=t("code",{class:"rounded bg-slate-100 px-1 dark:bg-slate-800"},"author / 123456",-1)),e[7]||(e[7]=r("，读者 ",-1)),e[8]||(e[8]=t("code",{class:"rounded bg-slate-100 px-1 dark:bg-slate-800"},"reader / 123456",-1)),e[9]||(e[9]=r("。",-1)),e[10]||(e[10]=t("br",null,null,-1)),e[11]||(e[11]=r(" 没有账户？",-1)),v(V(q),{to:"/register",class:"text-primary underline-offset-2 hover:underline"},{default:c(()=>[...e[2]||(e[2]=[r("立即注册",-1)])]),_:1})])]),t("form",{class:"space-y-4",onSubmit:N(g,["prevent"])},[t("label",L,[e[13]||(e[13]=t("span",{class:"font-medium text-slate-600 dark:text-slate-300"},"用户名",-1)),p(t("input",{"onUpdate:modelValue":e[0]||(e[0]=d=>a.username=d),type:"text",required:"",autocomplete:"username",class:"w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-700 shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 dark:border-slate-700 dark:bg-slate-950 dark:text-slate-100"},null,512),[[x,a.username]])]),t("label",M,[e[14]||(e[14]=t("span",{class:"font-medium text-slate-600 dark:text-slate-300"},"密码",-1)),p(t("input",{"onUpdate:modelValue":e[1]||(e[1]=d=>a.password=d),type:"password",required:"",autocomplete:"current-password",class:"w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-700 shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20 dark:border-slate-700 dark:bg-slate-950 dark:text-slate-100"},null,512),[[x,a.password]])]),o.value?(b(),i("p",T,m(o.value),1)):R("",!0),t("button",{type:"submit",disabled:l.value,class:"flex w-full items-center justify-center rounded-2xl bg-primary px-4 py-3 text-sm font-semibold text-white shadow-sm transition hover:bg-primary/90 disabled:cursor-not-allowed disabled:opacity-70"},m(l.value?"登录中...":"登录"),9,U)],32),e[15]||(e[15]=t("p",{class:"text-center text-xs text-slate-400 dark:text-slate-500"}," 注册信息会保存在本地浏览器中。 ",-1))])]))}};export{z as default};
